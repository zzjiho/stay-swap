<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìˆ™ì†Œ ìƒì„¸ - StaySwap</title>
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/listing-detail.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Google Maps API ì¶”ê°€ -->
    <script async defer th:src="@{'https://maps.googleapis.com/maps/api/js?key=' + ${googleMapsApiKey} + '&loading=async&libraries=places&language=ko'}"></script>
    <style>
        .listing-detail-container {
            visibility: hidden;
        }
        
        /* ì§€ë„ ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .location-section {
            margin-bottom: 40px;
            padding: 30px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .location-map {
            width: 100%;
            height: 400px;
            border-radius: 12px;
            border: 1px solid #e0e0e0;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .location-info {
            margin-top: 20px;
            padding: 20px;
            background-color: #f8f9fa;
            border-radius: 12px;
            border: 1px solid #e9ecef;
        }
        
        .location-info h4 {
            color: #333;
            margin-bottom: 10px;
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
        }
        
        .location-info h4::before {
            content: "ğŸ“";
            margin-right: 8px;
        }
        
        .location-info p {
            color: #666;
            margin: 0;
            line-height: 1.5;
            font-size: 14px;
        }
        
        /* ë¦¬ë·° ì„¹ì…˜ ìŠ¤íƒ€ì¼ */
        .reviews-section {
            margin-bottom: 40px;
            padding: 30px 0;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .reviews-header .section-title {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #333;
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 24px;
        }
        
        .reviews-header .fas.fa-star {
            color: #ffd700;
            font-size: 20px;
        }
        
        .reviews-summary {
            margin-bottom: 32px;
            padding: 24px;
            background: #f8f9fa;
            border-radius: 12px;
            border: 1px solid #e9ecef;
        }
        
        .rating-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 16px;
        }
        
        .rating-item {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .rating-label {
            min-width: 80px;
            font-size: 14px;
            color: #666;
            font-weight: 500;
        }
        
        .rating-bar {
            flex: 1;
            height: 6px;
            background: #e9ecef;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .rating-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffd700, #ff6b35);
            transition: width 0.3s ease;
        }
        
        .rating-score {
            min-width: 30px;
            font-size: 14px;
            font-weight: 600;
            color: #333;
            text-align: right;
        }
        
        .reviews-container {
            margin-bottom: 24px;
        }
        
        .review-item {
            padding: 20px 0;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            gap: 16px;
        }
        
        .review-item:last-child {
            border-bottom: none;
        }
        
        .review-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            overflow: hidden;
            flex-shrink: 0;
        }
        
        .review-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .review-avatar-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 18px;
        }
        
        .review-content {
            flex: 1;
        }
        
        .review-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .review-author {
            font-weight: 600;
            color: #333;
            font-size: 16px;
        }
        
        .review-rating {
            display: flex;
            align-items: center;
            gap: 4px;
            color: #ffd700;
            font-size: 14px;
        }
        
        .review-date {
            color: #999;
            font-size: 13px;
            margin-bottom: 12px;
        }
        
        .review-text {
            color: #555;
            line-height: 1.6;
            font-size: 15px;
        }
        
        .reviews-loading {
            text-align: center;
            padding: 40px 0;
            color: #666;
            font-size: 16px;
        }
        
        .reviews-actions {
            text-align: center;
            margin-top: 24px;
        }
        
        .show-all-reviews-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 500;
            border: 2px solid #007bff;
            color: #007bff;
            background: white;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .show-all-reviews-btn:hover {
            background: #007bff;
            color: white;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
        }
        
        /* ë¦¬ë·° ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .reviews-modal {
            z-index: 1100;
        }
        
        .reviews-modal-container {
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            background: white;
            border-radius: 16px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .reviews-modal-title h3 {
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 0;
            color: #333;
            font-size: 20px;
            font-weight: 600;
        }
        
        .reviews-modal-content {
            flex: 1;
            overflow-y: auto;
            padding: 0 24px 24px;
        }
        
        .reviews-modal-summary {
            margin-bottom: 24px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            border: 1px solid #e9ecef;
        }
        
        .rating-breakdown-modal {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 12px;
        }
        
        .reviews-modal-filters {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #e9ecef;
            flex-wrap: wrap;
            gap: 16px;
        }
        
        .filter-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 8px 16px;
            border: 1px solid #dee2e6;
            background: white;
            color: #666;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .filter-btn:hover {
            border-color: #007bff;
            color: #007bff;
        }
        
        .filter-btn.active {
            background: #007bff;
            color: white;
            border-color: #007bff;
        }
        
        .sort-options select {
            padding: 8px 12px;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            background: white;
            color: #333;
            font-size: 14px;
        }
        
        .modal-reviews-container {
            min-height: 300px;
        }
        
        .modal-reviews-loading {
            text-align: center;
            padding: 60px 0;
            color: #666;
            font-size: 16px;
        }
        
        .load-more-container {
            text-align: center;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid #e9ecef;
        }
        
        .load-more-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            font-size: 15px;
            font-weight: 500;
            border: 2px solid #6c757d;
            color: #6c757d;
            background: white;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .load-more-btn:hover {
            background: #6c757d;
            color: white;
        }
        
        .load-more-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* ë°˜ì‘í˜• ë””ìì¸ */
        @media (max-width: 768px) {
            .reviews-modal-container {
                width: 95%;
                max-height: 90vh;
            }
            
            .rating-breakdown {
                grid-template-columns: 1fr;
            }
            
            .rating-breakdown-modal {
                grid-template-columns: 1fr;
            }
            
            .reviews-modal-filters {
                flex-direction: column;
                align-items: stretch;
            }
            
            .filter-buttons {
                justify-content: center;
            }
            
            .sort-options {
                align-self: stretch;
            }
            
            .sort-options select {
                width: 100%;
            }
            
            .review-item {
                flex-direction: column;
                gap: 12px;
            }
            
            .review-avatar {
                align-self: flex-start;
            }
        }
        

    </style>
</head>
<body>
<!-- ë¡œë”© ìŠ¤í”¼ë„ˆ -->
<div id="loading-overlay" class="loading-overlay">
    <div class="loading-spinner"></div>
</div>

<!-- í—¤ë” í¬í•¨ -->
<div id="header"></div>

<main class="listing-detail-container">
    <!-- ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸° -->
    <div class="back-to-listings">
        <a href="/page/listings" class="back-link">
            <i class="fas fa-arrow-left"></i> ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
        </a>
    </div>

    <!-- ìˆ™ì†Œ ì œëª© -->
    <h1 id="listing-title" class="listing-title">ì„œìš¸ ê°•ë‚¨ ëª¨ë˜ ì•„íŒŒíŠ¸</h1>

    <!-- í‰ì  ë° ìœ„ì¹˜ ì •ë³´ (ìˆ˜ì •ëœ ë¶€ë¶„) -->
    <div class="listing-meta">
        <div class="listing-meta-left">
            <div class="listing-rating">
                <i class="fas fa-star"></i>
                <span id="listing-rating">4.9</span>
                <span id="listing-reviews">(28)</span>
                <span class="meta-separator">Â·</span>
                <div class="listing-location">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="listing-location">ì„œìš¸ ê°•ë‚¨êµ¬</span>
                </div>
            </div>
        </div>
        <div class="listing-actions">
            <button class="action-btn share-btn">
                <i class="fas fa-share-alt"></i> ê³µìœ 
            </button>
            <button class="action-btn save-btn">
                <i class="far fa-heart"></i> ì €ì¥
            </button>
        </div>
    </div>

    <!-- ê°¤ëŸ¬ë¦¬ -->
    <div class="gallery-container">
        <div class="gallery-main">
            <img id="gallery-main-image" src="/images/listing-detail-1.jpg" alt="ìˆ™ì†Œ ì´ë¯¸ì§€">
        </div>
        <div class="gallery-nav">
            <button class="gallery-prev">
                <i class="fas fa-chevron-left"></i>
            </button>
            <button class="gallery-next">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        <div id="gallery-dots" class="gallery-dots">
            <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
        </div>
    </div>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <div class="listing-info">
        <!-- ì™¼ìª½ ì»¬ëŸ¼: ìˆ™ì†Œ ì •ë³´ -->
        <div class="listing-main">
            <!-- í˜¸ìŠ¤íŠ¸ ì •ë³´ -->
            <div class="host-section">
                <h2 id="host-name-title" class="section-title">
                    ê¹€ë¯¼ìˆ˜ë‹˜ì´ í˜¸ìŠ¤íŒ…í•˜ëŠ” ìˆ™ì†Œ
                </h2>
                <div class="host-info">
                    <img id="host-profile-image" class="host-image" src="/images/host-1.jpg" alt="í˜¸ìŠ¤íŠ¸ ì´ë¯¸ì§€">
                    <div class="host-details">
                        <h3 id="host-name" class="host-name">
                            ê¹€ë¯¼ìˆ˜
                        </h3>
                        <div id="host-info-section" class="host-meta">
                            <span id="host-joined">
                                2020ë…„ì— ê°€ì…
                            </span>
                            <span id="host-reviews">
                                í›„ê¸° 28ê°œ
                            </span>
                            <span id="host-rating">
                                ì´ í‰ì : 4.5
                            </span>
<!--                            <span id="host-response-rate">-->
<!--                                    ì‘ë‹µë¥ : 98%-->
<!--                                </span>-->
                        </div>
                        <div id="superhost-badge" class="superhost-badge">
                            <i class="fas fa-award"></i> ìŠˆí¼í˜¸ìŠ¤íŠ¸
                        </div>
                    </div>
                </div>
            </div>

            <!-- íŠ¹ì§• ë°°ì§€ -->
            <div id="listing-features" class="listing-features">
                <span class="badge badge-outline">LiveLocal</span>
                <span class="badge badge-outline">ë¬´ë£Œ ì£¼ì°¨</span>
                <span class="badge badge-outline">ë°˜ë ¤ë™ë¬¼ ë™ë°˜ ê°€ëŠ¥</span>
            </div>

            <!-- ìˆ™ì†Œ ì„¤ëª… -->
            <div class="description-section">
                <h2 class="section-title">ìˆ™ì†Œ ì •ë³´</h2>
                <p id="listing-description" class="listing-description">
                    ê°•ë‚¨ì—­ì—ì„œ ë„ë³´ 5ë¶„ ê±°ë¦¬ì— ìœ„ì¹˜í•œ ëª¨ë˜í•œ ì•„íŒŒíŠ¸ì…ë‹ˆë‹¤. í¸ë¦¬í•œ êµí†µê³¼ í•¨ê»˜ ê°•ë‚¨ì˜ ì¤‘ì‹¬ì—ì„œ í˜„ì§€ì¸ì²˜ëŸ¼ ìƒí™œí•´ë³´ì„¸ìš”. ì£¼ë³€ì—ëŠ” ë‹¤ì–‘í•œ ë§›ì§‘ê³¼ ì‡¼í•‘ëª°ì´ ìˆì–´ í¸ë¦¬í•©ë‹ˆë‹¤.
                </p>
            </div>

            <!-- í¸ì˜ì‹œì„¤ -->
            <div class="amenities-section">
                <h2 class="section-title">í¸ì˜ì‹œì„¤</h2>
                <div id="amenities-container" class="amenities-container">
                    <div class="amenity">
                        <i class="fas fa-check"></i>
                        <span>ë¬´ì„  ì¸í„°ë„·</span>
                    </div>
                    <div class="amenity">
                        <i class="fas fa-check"></i>
                        <span>ì—ì–´ì»¨</span>
                    </div>
                    <div class="amenity">
                        <i class="fas fa-check"></i>
                        <span>ì„¸íƒê¸°</span>
                    </div>
                    <div class="amenity">
                        <i class="fas fa-check"></i>
                        <span>ì£¼ë°©</span>
                    </div>
                    <div class="amenity">
                        <i class="fas fa-check"></i>
                        <span>í—¤ì–´ë“œë¼ì´ì–´</span>
                    </div>
                    <div class="amenity">
                        <i class="fas fa-check"></i>
                        <span>ë‹¤ë¦¬ë¯¸</span>
                    </div>
                    <div class="amenity">
                        <i class="fas fa-check"></i>
                        <span>ëƒ‰ì¥ê³ </span>
                    </div>
                    <div class="amenity">
                        <i class="fas fa-check"></i>
                        <span>ì „ìë ˆì¸ì§€</span>
                    </div>
                    <div class="amenity">
                        <i class="fas fa-check"></i>
                        <span>TV</span>
                    </div>
                </div>
            </div>

            <!-- ìˆ™ì†Œ ìœ„ì¹˜ -->
            <div class="location-section">
                <h2 class="section-title">ìˆ™ì†Œ ìœ„ì¹˜</h2>
                <div class="location-map" id="listing-map"></div>
<!--                <div class="location-info">-->
<!--                    <h4>ì •í™•í•œ ìœ„ì¹˜</h4>-->
<!--                    <p id="location-address">ì²´í¬ì¸í•˜ì‹œëŠ” ë‚  ìƒì„¸ ìœ„ì¹˜ë¥¼ ì•Œë¦¼ìœ¼ë¡œ ë³´ë‚´ë“œë¦´ê²Œìš” ğŸ˜Š</p>-->
<!--                </div>-->
            </div>

            <!-- ë¦¬ë·° ì„¹ì…˜ -->
            <div class="reviews-section">
                <div class="reviews-header">
                    <h2 class="section-title">
                        <i class="fas fa-star"></i>
                        <span id="reviews-rating">4.9</span>
                        Â· í›„ê¸° <span id="reviews-count">28</span>ê°œ
                    </h2>
                </div>
                
                <div class="reviews-summary">
                    <div class="rating-breakdown">
                        <div class="rating-item">
                            <span class="rating-label">ì²­ê²°ë„</span>
                            <div class="rating-bar">
                                <div class="rating-fill" style="width: 96%"></div>
                            </div>
                            <span class="rating-score">4.8</span>
                        </div>
                        <div class="rating-item">
                            <span class="rating-label">ì •í™•ì„±</span>
                            <div class="rating-bar">
                                <div class="rating-fill" style="width: 98%"></div>
                            </div>
                            <span class="rating-score">4.9</span>
                        </div>
                        <div class="rating-item">
                            <span class="rating-label">ì˜ì‚¬ì†Œí†µ</span>
                            <div class="rating-bar">
                                <div class="rating-fill" style="width: 100%"></div>
                            </div>
                            <span class="rating-score">5.0</span>
                        </div>
                        <div class="rating-item">
                            <span class="rating-label">ìœ„ì¹˜</span>
                            <div class="rating-bar">
                                <div class="rating-fill" style="width: 94%"></div>
                            </div>
                            <span class="rating-score">4.7</span>
                        </div>
                        <div class="rating-item">
                            <span class="rating-label">ì²´í¬ì¸</span>
                            <div class="rating-bar">
                                <div class="rating-fill" style="width: 96%"></div>
                            </div>
                            <span class="rating-score">4.8</span>
                        </div>
                        <div class="rating-item">
                            <span class="rating-label">ê°€ì„±ë¹„</span>
                            <div class="rating-bar">
                                <div class="rating-fill" style="width: 98%"></div>
                            </div>
                            <span class="rating-score">4.9</span>
                        </div>
                    </div>
                </div>

                <div id="reviews-container" class="reviews-container">
                    <!-- ë¦¬ë·°ë“¤ì´ ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                    <div class="reviews-loading">
                        <i class="fas fa-spinner fa-spin"></i> ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
                    </div>
                </div>

                <div class="reviews-actions">
                    <button id="show-all-reviews-btn" class="btn btn-outline show-all-reviews-btn">
                        <i class="fas fa-comment-dots"></i> 
                        ëª¨ë“  í›„ê¸° ë³´ê¸° (<span id="total-reviews-count">28</span>ê°œ)
                    </button>
                </div>
            </div>

            <!-- ì˜ˆì•½ ì˜µì…˜ íƒ­ -->
<!--            <div class="booking-options-section">-->
<!--                <h2 class="section-title">ì˜ˆì•½ ì˜µì…˜</h2>-->
<!--                <div class="booking-tabs">-->
<!--                    <div class="booking-tab active">ê¸°ë³¸ êµí™˜</div>-->
<!--                    <div class="booking-tab">LiveLocal</div>-->
<!--                    <div class="booking-tab">TimeBank</div>-->
<!--                </div>-->
<!--                <div class="booking-tab-panes">-->
<!--                    &lt;!&ndash; ê¸°ë³¸ êµí™˜ íƒ­ &ndash;&gt;-->
<!--                    <div class="booking-tab-pane active">-->
<!--                        <p>ê¸°ë³¸ êµí™˜ì€ ìˆ™ì†Œ í¬ì¸íŠ¸ë§Œìœ¼ë¡œ êµí™˜í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì¶”ê°€ ì˜µì…˜ì„ ì„ íƒí•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ êµí™˜ìœ¼ë¡œ ì§„í–‰ë©ë‹ˆë‹¤.</p>-->
<!--                    </div>-->

<!--                    &lt;!&ndash; LiveLocal íƒ­ &ndash;&gt;-->
<!--                    <div class="booking-tab-pane" id="livelocal-container">-->
<!--                        &lt;!&ndash; ë™ì ìœ¼ë¡œ ìƒì„±ë¨ &ndash;&gt;-->
<!--                    </div>-->

<!--                    &lt;!&ndash; TimeBank íƒ­ &ndash;&gt;-->
<!--                    <div class="booking-tab-pane" id="timebank-container">-->
<!--                        &lt;!&ndash; ë™ì ìœ¼ë¡œ ìƒì„±ë¨ &ndash;&gt;-->
<!--                    </div>-->
<!--                </div>-->
<!--                <button id="options-apply-btn" class="btn btn-secondary">ì˜µì…˜ ì ìš©í•˜ê¸°</button>-->
<!--            </div>-->
        </div>

        <!-- ì˜¤ë¥¸ìª½ ì»¬ëŸ¼: ì˜ˆì•½ ì‚¬ì´ë“œë°” -->
        <div class="booking-sidebar">
            <div class="sidebar-header">
                <div class="sidebar-title">êµí™˜ ìš”ì•½</div>
                <div class="sidebar-rating">
                    <i class="fas fa-star"></i>
                    <span id="sidebar-rating">4.9</span>
                    <span>Â· í›„ê¸° <span id="sidebar-review-count">28</span>ê°œ</span>
                </div>
            </div>
<!--            <div class="sidebar-points" id="summary-points">-->
<!--                500 í¬ì¸íŠ¸-->
<!--            </div>-->
            <div class="booking-form">
                <div class="form-group">
                    <label class="form-label">ì²´í¬ì¸</label>
                    <input type="date" class="form-control" id="checkin-date" min="2023-01-01">
                </div>
                <div class="form-group">
                    <label class="form-label">ì²´í¬ì•„ì›ƒ</label>
                    <input type="date" class="form-control" id="checkout-date" min="2023-01-02">
                </div>
                <div class="form-group">
                    <label class="form-label">ê²ŒìŠ¤íŠ¸</label>
                    <select class="form-control" id="guest-count">
                        <option value="1">1ëª…</option>
                        <option value="2">2ëª…</option>
                        <option value="3">3ëª…</option>
                        <option value="4">4ëª…</option>
                    </select>
                </div>
            </div>
<!--            <div class="booking-summary">-->
<!--                <h3 class="summary-title">ìš”ê¸ˆ ì„¸ë¶€ ì •ë³´</h3>-->
<!--                <div class="summary-item">-->
<!--                    <span>ê¸°ë³¸ êµí™˜ í¬ì¸íŠ¸</span>-->
<!--                    <span id="listing-points">500 P</span>-->
<!--                </div>-->
<!--                <div class="summary-item">-->
<!--                    <span>LiveLocal ê²½í—˜</span>-->
<!--                    <span id="livelocal-points">0 P</span>-->
<!--                </div>-->
<!--                <div class="summary-item">-->
<!--                    <span>TimeBank ì„œë¹„ìŠ¤</span>-->
<!--                    <span id="timebank-points">0 P</span>-->
<!--                </div>-->
<!--                <div class="summary-total">-->
<!--                    <span>ì´ í¬ì¸íŠ¸</span>-->
<!--                    <span id="total-points">500 P</span>-->
<!--                </div>-->
<!--            </div>-->
            <div class="button-container">
                <button id="exchange-request-btn" class="btn btn-primary btn-block">êµí™˜ ìš”ì²­</button>
                <button id="stay-request-btn" class="btn btn-primary btn-block">ìˆ™ë°• ìš”ì²­</button>
            </div>
            
            <!-- í˜¸ìŠ¤íŠ¸ ë©”ì‹œì§€ ì„¹ì…˜ -->
            <div class="message-host-section">
                <button id="message-host-btn" class="btn btn-outline btn-block message-host-btn" disabled>
                    ğŸ’¬ í˜¸ìŠ¤íŠ¸ì—ê²Œ ë©”ì‹œì§€ ë³´ë‚´ê¸°
                    <div class="coming-soon-tooltip">
                        ê³§ ë§Œë‚˜ë³¼ ìˆ˜ ìˆì–´ìš”! ğŸš€
                    </div>
                </button>
            </div>
        </div>
    </div>
</main>

<!-- êµí™˜ ìš”ì²­ íŒì—… -->
<div id="exchange-popup" class="popup-overlay">
    <div class="popup-container">
        <div class="popup-header">
            <h3>êµí™˜ ìš”ì²­</h3>
            <button class="popup-close"><i class="fas fa-times"></i></button>
        </div>
        <div class="popup-content">
            <p>êµí™˜í•  ë‚´ ìˆ™ì†Œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
            <div class="my-listings-container">
                <!-- ë‚´ ìˆ™ì†Œ ëª©ë¡ì€ JavaScriptë¡œ ë™ì  ìƒì„±ë¨ -->
            </div>
            <div class="exchange-details">
                <div class="exchange-dates">
                    <p><strong>ì²´í¬ì¸:</strong> <span id="popup-checkin"></span></p>
                    <p><strong>ì²´í¬ì•„ì›ƒ:</strong> <span id="popup-checkout"></span></p>
                    <p><strong>ê²ŒìŠ¤íŠ¸:</strong> <span id="popup-guests"></span>ëª…</p>
                </div>
                <div class="exchange-message">
                    <label for="exchange-message-text">í˜¸ìŠ¤íŠ¸ì—ê²Œ ë©”ì‹œì§€ (ì„ íƒì‚¬í•­)</label>
                    <textarea id="exchange-message-text" rows="3" placeholder="í˜¸ìŠ¤íŠ¸ì—ê²Œ ì „ë‹¬í•  ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
                </div>
            </div>
        </div>
        <div class="popup-footer">
            <button class="btn btn-secondary popup-cancel">ì·¨ì†Œ</button>
            <button class="btn btn-primary popup-confirm" id="exchange-confirm">êµí™˜ ìš”ì²­ ë³´ë‚´ê¸°</button>
        </div>
    </div>
</div>

<!-- ìˆ™ë°• ìš”ì²­ í™•ì¸ íŒì—… -->
<div id="stay-popup" class="popup-overlay">
    <div class="popup-container">
        <div class="popup-header">
            <h3>ìˆ™ë°• ìš”ì²­ í™•ì¸</h3>
            <button class="popup-close"><i class="fas fa-times"></i></button>
        </div>
        <div class="popup-content">
            <p>ë‹¤ìŒ ì •ë³´ë¡œ ìˆ™ë°•ì„ ìš”ì²­í•˜ì‹œê² ìŠµë‹ˆê¹Œ?</p>
            <div class="stay-details">
                <p><strong>ìˆ™ì†Œ:</strong> <span id="stay-listing-title">ì„œìš¸ ê°•ë‚¨ ëª¨ë˜ ì•„íŒŒíŠ¸</span></p>
                <p><strong>ì²´í¬ì¸:</strong> <span id="stay-checkin"></span></p>
                <p><strong>ì²´í¬ì•„ì›ƒ:</strong> <span id="stay-checkout"></span></p>
                <p><strong>ê²ŒìŠ¤íŠ¸:</strong> <span id="stay-guests"></span>ëª…</p>
                <p><strong>ì´ í¬ì¸íŠ¸:</strong> <span id="stay-points"></span></p>
            </div>
            <div class="stay-message">
                <label for="stay-message-text">í˜¸ìŠ¤íŠ¸ì—ê²Œ ë©”ì‹œì§€ (ì„ íƒì‚¬í•­)</label>
                <textarea id="stay-message-text" rows="3" placeholder="í˜¸ìŠ¤íŠ¸ì—ê²Œ ì „ë‹¬í•  ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”."></textarea>
            </div>
        </div>
        <div class="popup-footer">
            <button class="btn btn-secondary popup-cancel">ì·¨ì†Œ</button>
            <button class="btn btn-primary popup-confirm" id="stay-confirm">ìˆ™ë°• ìš”ì²­ ë³´ë‚´ê¸°</button>
        </div>
    </div>
</div>

<!-- ë¦¬ë·° ì „ì²´ë³´ê¸° ëª¨ë‹¬ -->
<div id="reviews-modal" class="popup-overlay reviews-modal">
    <div class="popup-container reviews-modal-container">
        <div class="popup-header">
            <div class="reviews-modal-title">
                <h3>
                    <i class="fas fa-star"></i>
                    <span id="modal-reviews-rating">4.9</span>
                    Â· í›„ê¸° <span id="modal-reviews-count">28</span>ê°œ
                </h3>
            </div>
            <button class="popup-close"><i class="fas fa-times"></i></button>
        </div>
        
        <div class="reviews-modal-content">
            <div class="reviews-modal-summary">
                <div class="rating-breakdown-modal">
                    <!-- ë™ì ìœ¼ë¡œ ìƒì„±ë¨ -->
                </div>
            </div>
            
            <div class="reviews-modal-filters">
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">ì „ì²´</button>
                    <button class="filter-btn" data-filter="5">â­ 5ì </button>
                    <button class="filter-btn" data-filter="4">â­ 4ì </button>
                    <button class="filter-btn" data-filter="3">â­ 3ì  ì´í•˜</button>
                </div>
                <div class="sort-options">
                    <select id="reviews-sort">
                        <option value="recent">ìµœì‹ ìˆœ</option>
                        <option value="rating-high">í‰ì  ë†’ì€ìˆœ</option>
                        <option value="rating-low">í‰ì  ë‚®ì€ìˆœ</option>
                    </select>
                </div>
            </div>
            
            <div id="modal-reviews-container" class="modal-reviews-container">
                <!-- ë¦¬ë·°ë“¤ì´ ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
                <div class="modal-reviews-loading">
                    <i class="fas fa-spinner fa-spin"></i> ë¦¬ë·°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...
                </div>
            </div>
            
            <div id="modal-load-more" class="load-more-container">
                <button id="load-more-reviews-btn" class="btn btn-outline load-more-btn">
                    <i class="fas fa-plus"></i> ë” ë§ì€ í›„ê¸° ë³´ê¸°
                </button>
            </div>
        </div>
    </div>
</div>

<!-- í‘¸í„° í¬í•¨ -->
<div id="footer"></div>

<!-- JavaScript -->
<script src="/js/auth-common.js"></script>
<script src="/js/main.js"></script>
<script src="/js/listing-detail.js"></script>
</body>
</html>